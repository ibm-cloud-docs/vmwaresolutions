---

copyright:

  years:  2016, 2019

lastupdated: "2019-05-16"

---

# Attività proattive
{: #opsprocs-proactive}

L'obiettivo di questi controlli proattivi è quello di consentire agli amministratori di sistema di mantenere l'ambiente vCenter Server in uno stato integro. Se effettuati giornalmente, dovrebbero impedire che molti problemi comuni relativi all'utilizzo, alla capacità e alle prestazioni incidano sui carichi di lavoro. Questi controlli proattivi possono essere classificati nella seguente struttura:

* Integrità - Controlli che indicano problemi che stanno attualmente compromettendo l'integrità del tuo ambiente e richiedono un'attenzione immediata per ridurre al minimo l'impatto, ad esempio errori hardware.
* Rischio - Controlli che indicano problemi che non rappresentano minacce immediate ma che dovrebbero essere risolti nel prossimo futuro, ad esempio problemi di capacità.
* Efficienza - Controlli che indicano le aree in cui migliorare le prestazioni o recuperare le risorse. Ad esempio, dimensionare correttamente macchine virtuali (VM) e cluster.

Molte di queste attività proattive possono essere rese molto più semplici con Operations Management on {{site.data.keyword.cloud}} riducendo il sovraccarico di gestione.

Con l'utilizzo è importante comprendere la tua "baseline". Questa baseline riflette le normali operazioni nel tuo ambiente. Tutti i clienti hanno una baseline diversa in base alle pratiche standard, ai carichi di lavoro in esecuzione sull'istanza vCenter Server ecc. Questi controlli proattivi confronteranno quindi la capacità, le prestazioni e l'utilizzo recenti con questa baseline. In sintesi, questi controlli di utilizzo proattivi rispondono a 4 domande:

1. C'è un sovrautilizzo delle risorse?
2. Presto esaurirò la capacità?
3. Il mio cluster è sottodimensionato per i periodi di utilizzo massimo previsti?
4. Posso recuperare le risorse inutilizzate dalla mia infrastruttura virtuale?

Le seguenti linee guida ti aiutano ad essere proattivo e a mantenere un ambiente stabile:

* Pianifica le distribuzioni di VM assegnando risorse sufficienti per tutte le VM che prevedi di eseguire. Non dimenticare di consentire le risorse per lo stesso vSphere ESXi.
* Dimensiona correttamente le VM e assegna a ciascuna VM solo le risorse virtuali di cui ha bisogno. Eseguire il provisioning una VM con più risorse del necessario può ridurre le prestazioni di quella VM e delle altre sullo stesso host.
* In generale, l'80 percento di utilizzo della CPU host è un limite ragionevole e il 90 percento dovrebbe essere un avvertimento che le CPU si stanno avvicinando a una condizione di sovraccarico. Se i tuoi host si stanno avvicinando all'80 percento di utilizzo della CPU, esegui il provisioning di host aggiuntivi.
* In generale, l'80 percento di utilizzo della RAM host è un limite ragionevole e il 90 percento dovrebbe essere un avvertimento che gli host sono completamente utilizzati. Se i tuoi host si stanno avvicinando all'80 percento di utilizzo della RAM, esegui il provisioning di host aggiuntivi.
* È molto importante non assegnare una quantità ridotta di memoria, quindi assegna memoria sufficiente per mantenere l'insieme attivo di applicazioni che intendi eseguire nelle VM, per ridurre il rischio di blocco del sistema. Il blocco del sistema può influire significativamente sulle prestazioni delle applicazioni. Tuttavia, dovresti evitare anche di assegnare una notevole quantità di memoria.
* Utilizza le impostazioni delle risorse, la prenotazione, le condivisioni e i limiti solo se necessario nel tuo ambiente. Se prevedi modifiche frequenti alle risorse totali disponibili, utilizza
le condivisioni, e non la prenotazione, per assegnare le risorse in modo equo tra le VM. Le condivisioni hanno effetto solo quando c'è un conflitto di risorse.
* Se hai bisogno di utilizzare le prenotazioni, configurale per specificare la quantità minima accettabile di CPU o memoria, non la quantità che vuoi avere disponibile.
* Utilizza i pool di risorse per la gestione delle risorse delegate e per isolare completamente un pool di risorse, rendi fisso il tipo di pool di risorse e utilizza prenotazioni e limiti.
* Raggruppa le VM per un servizio multilivello in un pool di risorse. Ciò consente di assegnare le risorse per il servizio nel loro insieme. Seleziona attentamente le impostazioni delle risorse (ovvero, prenotazioni, condivisioni e limiti) per le tue VM. L'impostazione di prenotazioni troppo elevate può lasciare poche risorse non prenotate nel cluster, limitando così le opzioni che DRS ha per bilanciare il carico.
* L'impostazione di limiti troppo bassi potrebbe impedire alle VM di utilizzare le risorse supplementari disponibili nel cluster per migliorare le loro prestazioni.
* Esegui i tuoi cluster con non più dell'80 percento di utilizzo per consentire una maggiore possibilità di correzione degli host utilizzando VMware Update Manager. La correzione del cluster ha più probabilità di riuscire quando il cluster non è utilizzato per più dell'ottanta percento.
* Esistono molti motivi per utilizzare il thin provisioning dell'archiviazione, tuttavia, il thin provisioning aumenta il carico di lavoro di gestione del mantenimento del tuo ambiente in quanto devi prestare molta attenzione nel tuo processo di gestione della capacità.
*  Analizza la crescita della tua VM e scopri come la tua infrastruttura si sta abituando a supportare questa crescita; ordina ulteriore capacità per facilitare la crescita.
* Utilizza la capacità utilizzabile, che tiene conto di HA/buffer ecc, e non la capacità totale disponibile durante la pianificazione.
* Assicurati di eseguire l'ultima versione del BIOS disponibile per il tuo sistema.
* Assicurati di eseguire gli ultimi aggiornamenti VMware sui tuoi prodotti installati, incluso l'hardware della VM e VM Tools.

## Elenco di attività
{: #opsprocs-proactive-tasks}

Tabella 1. Attività proattive

| Titolo | Descrizione |
|---|---|
|Integrità|  Utilizzando vCenter, controlla l'integrità di tutti gli host e gli oggetti della VM. Passa metodicamente attraverso cluster, host, archivi dati, VM e reti alla ricerca di allarmi.  |
| Controllo di allarmi e notifiche | Ci sono allarmi attivi in vCenter di cui non sei stato avvisato? Per impostazione predefinita, vCenter dispone di una serie di allarmi definiti quando viene installato. Questi allarmi potrebbero avvisarti della presenza di problemi, tuttavia, per impostazione predefinita, visualizzano solo un'avvertenza o un avviso nel client vSphere. Possono essere configurati per inviare una notifica, ad esempio tramite email. Quando controlli l'integrità degli host e degli oggetti della VM, esamina tutti gli allarmi e decidi se è necessaria una notifica e configura secondo necessità. Hai bisogno di essere avvisato solo per i problemi più importanti o critici. Considera se vuoi essere avvisato di questo problema alle 2:00 o puoi aspettare fino al normale orario di lavoro e se troppe notifiche sono considerate come "rumore" e la natura umana è quella di ignorare tutti gli allarmi.  |
| Controllo di capacità/utilizzo di CPU e memoria del cluster  |  In vCenter, esamina le metriche di capacità/utilizzo per la CPU e memoria del cluster passando a turno su ciascun cluster e selezionando Monitor, Performance. Esamina i grafici e le statistiche per assicurarti che il tuo cluster disponga di risorse sufficienti per soddisfare la richiesta. La richiesta dovrebbe essere basata sul mantenimento di una capacità sufficiente per il burst delle VM quando necessario, un errore dell'host vSphere ESXi e per l'aggiunta di VM in base alle tue richieste di servizio note.|
| Controllo di capacità/utilizzo dell'archivio dati  |  In vCenter, esamina le metriche di capacità/utilizzo per gli archivi dati passando a turno su ciascun archivio dati e selezionando Monitor, Performance, Space. Esamina i grafici e le statistiche per assicurarti che il tuo archivio dati disponga di spazio sufficiente per soddisfare la richiesta. La richiesta dovrebbe essere basata sul mantenimento di una capacità sufficiente per un errore dell'host vSphere ESXi (per un cluster vSAN) e per l'aggiunta di VM in base alle tue richieste di servizio note.|
| Controllo prestazioni dell'archivio dati  |  In vCenter, esamina le metriche delle prestazioni per gli archivi dati passando a turno su ciascun archivio dati e selezionando Monitor, Performance, Performance, Real-time. Esamina i grafici e le statistiche per assicurarti che la tua baseline delle prestazioni dell'archivio dati sia quella prevista e che eventuali modifiche possano essere prese in considerazione. Esamina eventuali anomalie. |
| Firmware server bare metal | È consigliabile installare gli ultimi aggiornamenti firmware per i tuoi host di server bare metal. Controlla gli aggiornamenti firmware sugli host di server bare metal accedendo alla pagina di gestione remota su control.softlayer.com per ciascun host a turno e seleziona OS reload. Nella pagina visualizzata esamina la versione corrente e la versione di aggiornamento per la scheda madre e i dischi rigidi e verifica se ci sono aggiornamenti disponibili. Se presenti, pianifica l'aggiornamento del firmware nella tua prossima finestra di manutenzione. Per ulteriori informazioni, vedi [FAQs: Bare metal servers](/docs/bare-metal?topic=bare-metal-bm-faq#what-if-my-bare-metal-server-has-out-of-date-firmware){:new_window}. |
| Applicazione di patch a vSphere ESXi | Per informazioni sulla verifica della disponibilità delle patch vSphere ESXi, vedi [Creazione di baseline e collegamento agli oggetti di inventario](/docs/services/vmwaresolutions?topic=vmware-solutions-vum-baselines#vum-baselines){:new_window}. |
| Aggiornamenti hardware VM | Per informazioni sulla verifica della disponibilità degli aggiornamenti hardware della VM, vedi [Creazione di baseline e collegamento agli oggetti di inventario](/docs/services/vmwaresolutions?topic=vmware-solutions-vum-baselines#vum-baselines){:new_window}. |
| Aggiornamenti di VM Tools | Per ulteriori informazioni, vedi [Creazione di baseline e collegamento a oggetti di inventario](/docs/services/vmwaresolutions?topic=vmware-solutions-vum-baselines#vum-baselines){:new_window}. |
| Applicazione di patch a vSphere vSAN  | Per informazioni sulla verifica della disponibilità delle patch vSphere vSAN e sul processo di applicazione di patch, vedi [Aggiornamento dei cluster vSAN](/docs/services/vmwaresolutions?topic=vmware-solutions-vum-updating-vsan#vum-updating-vsan){:new_window}. |
| Applicazione di patch a vCenter | Per ulteriori informazioni sulla verifica della disponibilità delle patch VCSA e sull'applicazione di aggiornamenti, vedi [Aggiornamento di VCSA e vCenter collegati a SSO](/docs/services/vmwaresolutions?topic=vmware-solutions-vum-updating-vcsa#vum-updating-vcsa){:new_window}.  |
| Aggiornamento di NSX | Per ulteriori informazioni sulla verifica della disponibilità delle patch NSX e sull'applicazione di upgrade, vedi [NSX patching](/docs/services/vmwaresolutions?topic=vmware-solutions-vum-updating-nsx#vum-updating-nsx){:new_window}.  |
| Controllo delle VM senza VM Tools |  È buona norma installare VM Tools in quanto questo consente una maggiore interazione con il sistema operativo, ad esempio un arresto normale della VM. Puoi utilizzare vCenter per controllare in quali VM non è installato VM Tools passando al cluster, selezionando Related Objects, VM e quindi selezionando le colonne della tabella relative a VM Tools in esecuzione e alla versione di VM Tools. Esamina l'elenco e installa VM Tools come appropriato. |
| VM con istantanee | Per informazioni sulle procedure ottimali quando si lavora con le istantanee, vedi [Best practices for using snapshots in the vSphere environment (1025279)](https://kb.vmware.com/s/article/1025279){:new_window}. È importante identificare l'esistenza di VM con istantanee poiché l'utilizzo di una singola istantanea per più di 72 ore crea un file di istantanea che continua a crescere di dimensioni e può causare l'esaurimento dello spazio nel percorso di archiviazione delle istantanee e influire sulle prestazioni del sistema. Per esaminare le VM con istantanee, connettiti a vCenter utilizzando il client web, seleziona vCenter Server e vai alla scheda Related Objects. Fai clic con il tasto destro del mouse sui titoli di colonna e vai all'elenco Show/Hide Columns. Dall'elenco di colonne, scegli l'opzione Needs Consolidation. Questa colonna mostra tutte le VM attualmente in esecuzione su un'istantanea. |
| Applicazione di patch al sistema operativo AD/DNS | Microsoft Active Directory (AD) / Domain Name Server (DNS) viene configurato automaticamente per scaricare solo gli aggiornamenti. Per ulteriori informazioni, vedi [Altre limitazioni e considerazioni](/docs/services/vmwaresolutions?topic=vmware-solutions-trbl_limitations#trbl_limitations){:new_window} per ulteriori consigli sugli aggiornamenti. |
| Controlla la latenza di archiviazione  |  Controlla la latenza di archiviazione per comprendere eventuali modifiche nel modo in cui gli host vSphere ESXi accedono agli archivi dati. Una latenza troppo elevata fa rallentare le applicazioni ospitate nelle VM. In vCenter, passa a ciascuno degli archivi dati e, utilizzando la scheda Performance, esamina la latenza media di scrittura per ogni VM. |
| Esamina le VM con dispositivi virtuali | I dispositivi virtuali come CD o unità floppy creano un sovraccarico, pertanto, rimuovi tutti i dispositivi che non sono necessari per una VM. |
| Consigli sulla capacità vSAN | Quando qualsiasi dispositivo di capacità nel cluster risulta completo all'80 percento, vSAN ribilancia automaticamente il cluster finché lo spazio disponibile su tutti i dispositivi di capacità è inferiore alla soglia. Le seguenti operazioni possono far raggiungere la capacità del disco all'80 percento e avviare il ribilanciamento del cluster: errori hardware, gli host vSAN vengono messi in modalità di manutenzione con l'opzione Evacuate all data o gli host vSAN vengono messi in modalità di manutenzione con l'opzione Ensure data accessibility quando gli oggetti a cui è assegnato PFTT=0 risiedono sull'host. Per fornire spazio sufficiente per la manutenzione e la riprotezione e per ridurre al minimo gli eventi di ribilanciamento automatico nel cluster vSAN, considera la possibilità di mantenere al 30 percento la capacità disponibile in ogni momento. |
| Controllo dell'utilizzo del cluster | Utilizzando vCenter, esamina ciascun cluster e identifica quali cluster hanno un utilizzo del 50 percento o superiore di CPU e RAM. Il 50 percento viene scelto come livello di avvertenza per focalizzare l'attenzione sulla potenziale espansione di questo cluster con host aggiuntivi o con l'aggiunta di nuovi cluster. La differenza tra il 50 percento di utilizzo e un massimo di 80-90 percento è il tuo spazio per ulteriori VM a causa delle richieste di servizio. Al limite del 50 percento dovresti considerare le richieste e le previsioni per il prossimo futuro quando è necessario aggiungere risorse aggiuntive. |
| Riesame del consolidamento del cluster | Utilizzando vCenter, esamina ciascun cluster e identifica quali cluster hanno un utilizzo del 30 percento o inferiore di CPU e RAM. Il 30 percento viene scelto come livello di avvertenza per focalizzare l'attenzione sul potenziale corretto dimensionamento di questo cluster rimuovendo gli host o rimuovendo questo cluster e spostando le VM su un altro cluster. |
| Dimensiona correttamente le VM di dimensioni eccessive | Utilizza un approccio semplice per dimensionare correttamente le VM di dimensioni eccessive: a. identificare, b. delineare il profilo e ottimizzare e c. monitorare le tendenze della richiesta. Utilizzando vCenter, identifica le VM di grandi dimensioni che hanno il potenziale per il corretto dimensionamento. Passa a Monitor, Performance e delinea il profilo medio della richiesta di CPU e RAM del carico di lavoro nel tempo e regola le risorse virtuali. Infine, continua a monitorare i carichi di lavoro per verificare che le prestazioni siano accettabili. Idealmente, la memoria utilizzata per la VM dovrebbe essere simile alla memoria utilizzata dal sistema operativo guest, oltre al sovraccarico per l'esecuzione della VM.|
| Dimensiona correttamente le VM di dimensioni insufficienti | Utilizza un approccio semplice per dimensionare correttamente le VM di dimensioni insufficienti; a. identificare, b. delineare il profilo e ottimizzare e c. monitorare le tendenze della richiesta. Identifica le VM di dimensioni ridotte che necessitano di un corretto dimensionamento. Delinea il profilo medio della richiesta di CPU e RAM del carico di lavoro nel tempo e regola le risorse virtuali. Infine, continua a monitorare i carichi di lavoro per verificare che le prestazioni siano accettabili. Idealmente, la memoria utilizzata per la VM dovrebbe essere simile alla memoria utilizzata dal sistema operativo guest, oltre al sovraccarico per l'esecuzione della VM.|
| Controlla la disponibilità dei dispositivi hardware della VM | Utilizzando la risorsa online di compatibilità hardware VMware, controlla che le tue risorse hardware della VM, rete, dispositivi di archiviazione ecc, siano supportati per tale sistema operativo. Se non sono supportati, passa a un dispositivo supportato per migliorare l'affidabilità e le prestazioni.  |

## Link correlati
{: #opsprocs-proactive-links}

* [Operations Management on {{site.data.keyword.cloud_notm}}](/docs/services/vmwaresolutions/services?topic=vmware-solutions-opsmgmt-intro)
