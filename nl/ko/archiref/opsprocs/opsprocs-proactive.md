---

copyright:

  years:  2016, 2019

lastupdated: "2019-06-04"

---

# 사전 예방적 태스크
{: #opsprocs-proactive}

이 사전 예방적 점검의 목표는 시스템 관리자가 vCenter Server 환경을 정상적인 상태로 유지할 수 있도록 하는 것입니다. 매일 수행하는 경우 사용법, 용량 및 성능 문제가 워크로드에 영향을 주지 않도록 해야 합니다. 이 사전 예방적 점검은 다음 구조로 분류될 수 있습니다.

* 상태 - 현재 사용자 환경의 상태에 영향을 주고 영향을 최소화하기 위해 즉각적인 주의를 요하는 문제 즉, 하드웨어 장애를 표시하는지를 점검합니다. 
* 위험 - 즉각적인 위협은 아니지만 곧 해결되어야 하는 문제를 점검합니다. 예를 들면, 용량 문제입니다. 
* 효율성 - 성능을 향상시키거나 리소스를 재확보하기 위한 영역을 표시하는지를 점검합니다. 예를 들어, 적절하게 크기가 지정된 가상 머신(VM) 및 클러스터입니다.

다수의 사전 예방적 태스크는 Operations Management on {{site.data.keyword.cloud}}를 사용하여 더욱 간소화된 방식으로 수행될 수 있고 관리 오버헤드를 줄일 수 있습니다.

활용도를 통해 "기준선"을 이해하는 것이 중요합니다. 이 기준선은 사용자 환경의 일반 오퍼레이션을 반영합니다. 모든 클라이언트에는 vCenter Server 등에서 실행되는 워크로드인 표준 사례를 기반으로 하는 여러 기준선이 있습니다. 이에 따라 사전 예방적 점검은 최근 용량/성능/활용도를 이 기준선과 비교합니다. 요약하면, 이 사전 예방적 사용 점검은 네 가지 질문에 답변합니다. 

1. 지금 과도하게 활용되고 있습니까?
2. 곧 용량이 소진됩니까?
3. 예상된 최대 사용 기간 중에 내 클러스터의 크기는 적절하게 유지됩니까?
4. 내 가상 인프라에서 사용되지 않는 리소스를 재확보할 수 있습니까?

## 가이드라인
{: #opsprocs-proactive-guidelines}

다음 지침은 사전 예방적인 상태에서 안정적인 환경을 유지보수하는 데 도움이 됩니다.
* 실행할 모든 VM을 위해 리소스를 할당하여 VM 배치를 계획하십시오. vSphere ESXi 자체를 위해 리소스를 허용하는 것을 잊지마십시오.
* VM의 크기를 올바르게 조정하고 VM이 필요로 하는 가상 리소스만 각 VM에 할당하십시오. 필요한 리소스보다 더 많은 리소스로 VM을 프로비저닝하면 VM과 동일한 호스트에 있는 다른 VM의 성능을 저하시킬 수 있습니다. 
* 일반적으로, 호스트 CPU 사용량이 80%이면 적절한 수준이고 90%이면 CPU가 과부하된 상태에 근접하다는 경고를 의미합니다. 호스트가 80%의 CPU 사용량에 근접하면 추가 호스트를 프로비저닝하십시오. 
* 일반적으로, 호스트 RAM 사용량이 80%이면 적절한 수준이고 90%이면 호스트가 완전히 사용된다는 경고를 의미합니다. 호스트가 80%의 RAM 사용량에 근접하면 추가 호스트를 프로비저닝하십시오. 
* 메모리를 과다 할당하지 않는 것이 중요하므로 스레싱을 최소화하려면 VM에서 실행할 애플리케이션의 작업 세트를 보유하도록 충분한 메모리를 할당하십시오. 스레싱은 애플리케이션 성능에 큰 영향을 줄 수 있습니다. 그러나 실질적으로 메모리도 과다하게 할당하지 않도록 해야 합니다.
* 사용자 환경에 필요한 경우에만 리소스 설정, 예약, 공유 및 한계를 사용하십시오. 사용 가능한 총 리소스에 대한 빈번한 변경이 예상되는 경우
예약이 아닌 공유를 사용하여 적절하게 할당하십시오. 공유는 리소스 경합이 있는 경우에만 적용됩니다.
* 예약을 사용해야 하는 경우 사용 가능한 양이 아닌 최소 허용 가능한 CPU 또는 메모리의 양을 지정하도록 구성하십시오.
* 위임된 리소스 관리를 위해 리소스 풀을 사용하고, 리소스 풀을 완전하게 격리하기 위해 리소스 풀 유형을 고정 상태로 설정하며 예약 및 한계를 사용하십시오. 
* 다중 티어 서비스를 위한 VM을 리소스 풀로 그룹화하십시오. 이를 통해 전체적으로 리소스를 서비스에 맞게 지정할 수 있습니다. 사용자의 VM에 적합한 리소스 설정(즉, 예약, 공유 및 한계)에 유의하여 선택하십시오. 예약을 너무 많이 설정하면 클러스터에 예약되지 않은 리소스가 거의 없게 되므로 옵션 DRS을 제한하려면 로드 밸런싱을 수행해야 합니다. 
* 제한을 너무 적게 설정하면 성능 향상을 위해 클러스터에서 사용할 수 있는 추가 리소스를 VM에서 사용하지 못할 수 있습니다. 
* VMware Update Manager를 사용하여 호스트를 수정하려면 80% 이하의 사용량으로 클러스터를 실행하십시오. 클러스터가 최대 80% 사용량으로 실행 중일 때 수정될 가능성이 가장 높습니다. 
* 스토리지의 씬 프로비저닝을 사용해야 하는 여러 가지 이유가 있습니다. 그러나 용량 관리 프로세스에 더 많은 주의가 요구됨에 따라 씬 프로비저닝을 사용하면 환경을 유지보수하는 관리 워크로드가 늘어나게 됩니다. 
*  VM 확장을 분석하고, 인프라가 이 확장을 지원하도록 인프라가 모두 사용되는 방식을 이해하고, 이 확장을 용이하게 하도록 추가 용량을 주문하십시오. 
* 계획 시 사용 가능한 총 용량이 아닌 HA 및 버퍼를 고려하여 사용 가능한 용량을 사용하십시오. 
* 사용자 시스템에 사용 가능한 최신 BIOS 버전이 실행 중인지 확인하십시오. 
* 설치된 제품에 대한 최신 VMware 업데이트를 실행 중인지 확인하십시오. 여기에는 VM 하드웨어 및 VM Tools가 포함됩니다. 

## 태스크 목록
{: #opsprocs-proactive-tasks}

표 1. 사전 예방적 태스크

| 제목 | 설명 |
|---|---|
| 상태  | vCenter를 사용하는 경우 모든 호스트 및 VM 오브젝트의 상태를 확인하십시오. 클러스터, 호스트, 데이터 저장소, VM 및 네트워크를 체계적으로 탐색하여 알람을 찾으십시오. |
| 알람 및 알림 검사 | 아직 알림을 수신하지 않은 vCenter의 활성 알람이 있습니까? 기본적으로, vCenter에는 설치될 때 정의된 많은 알람이 있습니다. 이 알람으로 경고가 발행될 수 있지만, 기본적으로 VMware vSphere Web Client 클라이언트에서 경고 또는 경보 이외의 조치는 취해지지 않습니다. 이메일과 같은 알림으로 구성될 수 있습니다. 호스트 및 VM 오브젝트의 상태를 확인할 때 알람을 검토하고, 알림이 필요한지 여부를 판별하고, 필요에 따라 구성하십시오. 가장 중요하거나 위험한 문제에 대해서만 알림을 수신해야 합니다. 새벽 2시에 이 문제 대한 알림을 수신할지 아니면 또는 일반 작업 시간까지 기다릴 수 있는지를 고려합니다. 너무 많은 알림이 "소음"으로 간주되고 인간 본성적으로 모든 알람이 무시될 수 있습니다. |
| 클러스터 CPU 및 메모리 용량/활용도 확인 | 각 클러스터로 차례로 이동하고 모니터, 성능을 선택하여 vCenter를 사용함으로써 클러스터의 CPU 및 메모리에 대한 용량/활용도 메트릭을 검토하십시오. 그래프 및 통계를 검토하여 클러스터에 요청을 충족시킬 수 있는 충분한 리소스가 있는지를 확인하십시오. 요청은 VM이 버스트할 충분한 용량(필요한 경우), vSphere ESXi 호스트가 실패할 충분한 용량 및 알려진 서비스 요청에 따라 추가될 VM과 같은 요청은 유지보수를 기반으로 해야 합니다. |
| 데이터 저장소 용량/활용도 확인  | 각 데이터 저장소를 차례로 이동하고 모니터, 성능을 선택하여 vCenter를 사용함으로써 데이터 저장소에 대한 용량/활용도 메트릭을 검토하십시오. 그래프 및 통계를 검토하여 데이터 저장소에 요청을 충족시킬 수 있는 충분한 공간이 있는지 확인하십시오. 요청은 vSphere ESXi 호스트가 실패할 충분한 용량(vSAN 클러스터용) 및 알려진 서비스 요청에 따라 추가될 VM과 같은 요청은 유지보수를 기반으로 해야 합니다. |
| 데이터 저장소 성능 확인  | 각 데이터 저장소를 차례로 이동하고 모니터, 성능, 실시간을 선택하여 vCenter를 사용함으로써 데이터 저장소에 대한 성능 메트릭을 검토하십시오. 그래프 및 통계를 검토하여 데이터 저장소 성능 기준선이 충족되는지와 변경사항이 고려될 수 있는지 확인하십시오. 이상 항목을 조사하십시오. |
| 베어메탈 서버 펌웨어 | 우수 사례는 베어메탈 서버 호스트에 대한 최신 펌웨어 업데이트를 설치하는 것입니다. 각 호스트에 대해 차례로 `control.softlayer.com`의 원격 관리 페이지로 이동하여 베어메탈 서버 호스트에 대한 펌웨어 업데이트를 확인하고 OS 다시 로드를 선택하십시오. 표시되는 페이지에서 시스템 보드 및 하드 디스크 드라이브의 현재 버전과 업데이트 버전을 검토하고 사용 가능한 업데이트가 있는지 확인하십시오. 해당 경우, 다음 유지보수 창에서 펌웨어 업데이트를 계획하십시오. 자세한 정보는 [FAQ: 베어메탈 서버](/docs/bare-metal?topic=bare-metal-bm-faq#what-if-my-bare-metal-server-has-out-of-date-firmware)를 참조하십시오. |
| vSphere ESXi 패치 |vSphere ESXi 패치의 가용성 확인에 대한 자세한 정보는 [기준선 작성 및 인벤토리 오브젝트에 연결](/docs/services/vmwaresolutions?topic=vmware-solutions-vum-baselines#vum-baselines)을 참조하십시오. |
| VM 하드웨어 업데이트 |VM 하드웨어 업데이트의 가용성 확인에 대한 자세한 정보는 [기준선 작성 및 인벤토리 오브젝트에 연결](/docs/services/vmwaresolutions?topic=vmware-solutions-vum-baselines#vum-baselines)을 참조하십시오. |
| VM Tools 업데이트 |자세한 정보는 [기준선 작성 및 인벤토리 오브젝트에 연결](/docs/services/vmwaresolutions?topic=vmware-solutions-vum-baselines#vum-baselines)을 참조하십시오. |
| vSphere vSAN 패치  |vSphere vSAN 패치의 가용성 확인 및 패치 프로세스에 대한 자세한 정보는 [vSAN 클러스터 업데이트](/docs/services/vmwaresolutions?topic=vmware-solutions-vum-updating-vsan#vum-updating-vsan)를 참조하십시오. |
| vCenter 패치 |VCSA 패치의 가용성 확인 및 업데이트 적용에 대한 자세한 정보는 [VCSA 업데이트 및 SSO 연결 vCenter](/docs/services/vmwaresolutions?topic=vmware-solutions-vum-updating-vcsa#vum-updating-vcsa)를 참조하십시오. |
| NSX 업데이트 |NSX 패치의 가용성 확인 및 업그레이드 적용에 대한 자세한 정보는 [NSX 패치](/docs/services/vmwaresolutions?topic=vmware-solutions-vum-updating-nsx#vum-updating-nsx)를 참조하십시오. |
| VM Tools 없이 VM 확인 | 우수 사례는 OS에서 더 큰 상호작용 즉, VM의 정상 종료를 허용할 때 VM Tools를 설치하는 것입니다. vCenter를 사용하여 클러스터로 이동하고 관련 오브젝트를 선택한 후 테이블에서 실행 중인 VM Tools 및 VM Tools 버전을 사용으로 설정함으로써 VM Tools에 설치되지 않은 VM을 확인할 수 있습니다. 목록을 검토하고 필요에 따라 VM Tools를 설치하십시오. |
| VM(스냅샷 포함) | 스냅샷 관련 작업 수행 시 우수 사례에 대한 자세한 정보는 [vSphere 환경에서 스냅샷을 사용한 우수 사례(1025279)](https://kb.vmware.com/s/article/1025279){:new_window}를 참조하십시오. 72시간이 넘는 시간 동안 단일 스냅샷을 사용하면 작성되는 스냅샷 파일의 크기가 계속 커지고 스냅샷 스토리지 위치의 공간이 부족하게 되며 시스템 성능에 영향을 줄 수 있으므로 스냅샷을 사용하는 VM의 존재를 식별하는 것이 중요합니다. 스냅샷을 사용하여 VM을 검토하려면 Web Client를 사용하여 vCenter에 연결하고 vCenter Server를 선택한 후 관련 오브젝트 탭으로 이동하십시오. 열 제목을 마우스 오른쪽 단추로 클릭하고 열 표시/숨기기 목록으로 이동하십시오. 열 목록에서 통합 필요 옵션을 선택하십시오. 이 열은 스냅샷에서 현재 실행 중인 모든 VM의 요약을 표시합니다. |
| AD/DNS OS 패치 |Microsoft Active Directory(AD)/DNS(Domain Name Server)는 업데이트만 다운로드하도록 자동으로 설정됩니다. 이후 업데이트 권장사항에 대한 자세한 정보는 [추가 제한사항 및 고려사항](/docs/services/vmwaresolutions?topic=vmware-solutions-trbl_limitations#trbl_limitations)을 참조하십시오. |
| 스토리지 대기 시간 확인  | 데이터 저장소에 액세스하기 위해 vSphere ESXi 호스트에 대한 변경사항을 이해하려면 스토리지 대기 시간을 확인하십시오. 대기 시간이 너무 길면 VM에 호스팅된 애플리케이션의 속도가 느려집니다. vCenter에서 각 데이터 저장소로 이동하고 성능 탭에서 VM당 평균 쓰기 대기 시간을 검토하십시오. |
| 가상 디바이스가 있는 VM 검토 | CD 또는 디스켓 드라이브와 같은 가상 디바이스로 오버헤드가 작성됩니다. 그러므로 VM에 필요하지 않은 디바이스를 제거하십시오. |
| vSAN 용량 조언 | 클러스터의 용량 디바이스가 80% 가득 차면 모든 용량 디바이스에 사용 가능한 공간이 임계값 미만이 될 때까지 vSAN은 자동으로 클러스터를 다시 밸런싱합니다. PFTT=0으로 지정된 오브젝트가 호스트에 상주하는 경우 하드웨어 실패, 모든 데이터 제거 옵션과 함께 유지보수 모드로 배치되는 vSAN 호스트 또는 데이터 액세스 확인 옵션과 함께 유지보수 모드로 배치되는 vSAN 호스트와 같은 오퍼레이션으로 디스크 용량이 80%에 도달하고 클러스터 다시 밸런싱이 시작됩니다. 유지보수 및 재보호를 위해 충분한 공간을 제공하고 vSAN 클러스터에서 이벤트의 자동 다시 밸런싱을 최소화하려면 항상 30% 용량이 사용 가능하도록 유지할 것을 고려하십시오. |
| 클러스터 활용도 확인 | vCenter를 사용하여 각 클러스터를 검토하고 CPU 및 RAM의 활용도가 50% 이상인 클러스터를 식별하십시오. 추가 호스트 또는 클러스터를 포함하여 이 클러스터의 잠재적인 확장에 중점을 두도록 경고 레벨로 50%가 선택됩니다. 50% 활용도와 최대 80 - 90% 활용도의 차이점은 서비스 요청으로 인한 추가 VM용 공간입니다. 50% 제한에 도달한 경우 곧 수행할 요청을 확인하고 더 많은 리소스를 추가해야 하는 시점을 예측해야 합니다. |
| 클러스터 통합 검토 | vCenter를 사용하여 각 클러스터를 검토하고 CPU 및 RAM의 활용도가 30% 미만인 클러스터를 식별하십시오. 호스트를 제거하거나 이 클러스터를 제거하고 VM을 다른 클러스터로 이동하여 이 클러스터의 잠재적인 적절한 크기 지정에 중점을 두도록 경고 레벨로 30%가 선택됩니다. |
| 대형 크기의 VM을 적절하게 크기 지정 |단순한 접근 방식 즉, 식별, 프로파일 및 조정, 수요 동향 모니터를 통해 대형 크기의 VM을 적절하게 크기 지정하십시오. vCenter를 사용하면 적절한 크기 지정에 대한 가능성이 있는 대형 VM을 식별할 수 있습니다. 모니터, 성능으로 이동하고 시간 경과에 따른 워크로드의 평균 CPU 및 RAM 수요 프로파일을 프로파일링하십시오. 마지막으로 성능이 허용 가능한지 확인하려면 워크로드를 계속해서 모니터하십시오. 이상적으로 VM에 대해 소비된 메모리는 게스트 OS 및 VM 실행을 위한 오버헤드로 사용되는 메모리에 근접해야 합니다.|
| 소형 크기의 VM을 적절하게 크기 지정 |단순한 접근 방식 즉, a. 식별, b. 프로파일 및 조정, c. 수요 동향 모니터를 사용하여 소형 크기의 VM을 적절하게 크기 지정하십시오. 적절한 크기 지정이 필요한 소형 VM을 식별하십시오. 시간 경과에 따른 워크로드의 평균 CPU 및 RAM 수요 프로파일을 프로파일링하십시오. 마지막으로 성능이 허용 가능한지 확인하려면 워크로드를 계속해서 모니터하십시오. 이상적으로 VM에 대해 소비된 메모리는 게스트 OS 및 VM 실행을 위한 오버헤드로 사용되는 메모리에 근접해야 합니다.|
| VM 하드웨어 디바이스 호환성 확인 | 하드웨어 호환성 온라인 리소스를 사용하여 네트워크, 스토리지 디바이스 등과 같은 VM의 하드웨어 리소스가 해당 OS에 대해 지원되는지 확인하십시오. 지원되지 않으면 지원되는 디바이스를 변경하여 신뢰성 및 성능을 개선하십시오.  |

## 관련 링크
{: #opsprocs-proactive-links}

* [Operations Management on {{site.data.keyword.cloud_notm}}](/docs/services/vmwaresolutions/services?topic=vmware-solutions-opsmgmt-intro)
