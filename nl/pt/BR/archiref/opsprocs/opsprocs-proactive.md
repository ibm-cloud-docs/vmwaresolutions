---

copyright:

  years:  2016, 2019

lastupdated: "2019-05-16"

---

# Tarefas proativas
{: #opsprocs-proactive}

O objetivo dessas verificações proativas é permitir que os administradores do sistema mantenham o ambiente do vCenter Server em um estado funcional. Quando realizadas diariamente, evitam que muitos problemas comuns relacionados à utilização, à capacidade e ao desempenho impactem suas cargas de trabalho. Essas verificações proativas podem ser classificadas na estrutura a seguir:

* Funcionamento - Verificações que indicam problemas afetando atualmente o funcionamento de seu ambiente e requerem atenção imediata para minimizar o impacto, ou seja, falhas de hardware.
* Risco - Verificações que indicam problemas que não são ameaças imediatas, mas que devem ser tratados no futuro próximo, ou seja, problemas de capacidade.
* Eficiência - Verificações que indicam áreas para melhorar o desempenho ou recuperar recursos. Por exemplo, máquinas virtuais (VMs) com dimensionamento adequado e clusters.

Diversas dessas tarefas proativas podem ser muito simplificadas com o Operations Management on {{site.data.keyword.cloud}} e reduzem a sobrecarga de gerenciamento.

Com a utilização, é importante entender a sua "linha de base". Essa linha de base reflete as operações normais em seu ambiente. Todos os clientes têm uma linha de base diferente com base em suas práticas padrão, cargas de trabalho em execução na instância do vCenter Server etc. Essas verificações proativas estão comparando, portanto, a capacidade/desempenho/utilização atual com relação a essa linha de base. Resumindo, essas verificações de utilização proativas estão respondendo a quatro perguntas:

1. Estou realizando uma utilização excessiva no momento?
2. Ficarei sem capacidade em breve?
3. Meu cluster está dimensionado de maneira inadequada para os períodos esperados de aumento de uso?
4. Posso recuperar recursos não usados da minha infraestrutura virtual?

As diretrizes a seguir ajudam você a ser proativo e manter um ambiente estável:

* Planeje suas implementações de VM alocando recursos suficientes para todas as VMs que planeja executar. Não se esqueça de permitir recursos para o próprio vSphere ESXi.
* Dimensione suas VMs corretamente e aloque para cada uma delas apenas os recursos virtuais necessários. Provisionar a uma VM mais recursos do que ela precisa pode reduzir o desempenho dela e de outras VMs no mesmo host.
* Em geral, 80% de uso de CPU do host é uma margem razoável e 90% deve ser um aviso de que as CPUs estão se aproximando de uma condição de sobrecarga. Se seus hosts estiverem se aproximando de 80% de uso de CPU, provisione hosts adicionais.
* Em geral, 80% de uso de RAM do host é uma margem razoável e 90% deve ser um aviso de que os hosts estão totalmente utilizados. Se seus hosts estiverem se aproximando de 80% de uso de RAM, provisione hosts adicionais.
* É muito importante não alocar menos memória do que o necessário, portanto, aloque memória suficiente para conter o conjunto de trabalhos dos aplicativos que planeja executar nas VMs para minimizar thrashing. Thrashing pode impactar drasticamente o desempenho do aplicativo. No entanto, também se deve evitar alocar substancialmente mais memória do que o necessário.
* Use configurações de recurso, a reserva, compartilhamentos e limites somente se for necessário para seu ambiente. Se você espera mudanças frequentes no total de recursos disponíveis, use compartilhamentos, não reservas, para alocar recursos de forma balanceada entre as VMs. Os compartilhamentos entram em vigor apenas quando há contenção de recursos.
* Se for necessário usar reservas, configure-as para especificar a quantidade mínima aceitável de CPU ou memória e não aquela que gostaria de ter disponível.
* Use os conjuntos de recursos para o gerenciamento de recurso delegado e, para isolar totalmente um conjunto de recursos, torne o tipo do conjunto de recursos Fixo e use Reserva e Limite.
* Agrupe VMs para um serviço multicamada em um conjunto de recursos. Isso permite que os recursos sejam designados para o serviço como um todo. Selecione com cuidado as configurações de recurso (ou seja, reservas, compartilhamentos e limites) para suas VMs. A configuração muito alta de reservas pode fazer com que apenas alguns recursos não estejam reservados no cluster, limitando as opções de balanceamento de carga do DRS.
* A configuração muito baixa de limites poderia evitar que as VMs usassem recursos adicionais disponíveis no cluster para melhorar seu desempenho.
* Execute seus clusters utilizando não mais de 80% e permita um maior sucesso de correção de hosts usando o VMware Update Manager. É provável que a correção do Cluster seja bem-sucedida quando ele for.
* Há muitas razões para usar o thin provisioning de armazenamento, no entanto, ele aumenta a carga de trabalho de gerenciamento da manutenção de seu ambiente, pois é necessário ser muito cuidadoso em seu processo de gerenciamento de capacidade.
*  Analise o crescimento da sua VM, entenda como sua infraestrutura está sendo usada para suportá-lo e solicite capacidade adicional para facilitá-lo.
* Em vez de usar a capacidade total disponível no planejamento, use a capacidade utilizável, que leva em conta alta disponibilidade/buffers, etc.
* Certifique-se de estar executando a versão mais recente do BIOS disponível para seu sistema.
* Certifique-se de estar executando as atualizações mais recentes do VMware para seus produtos instalados, o que inclui o hardware da VM e o VM Tools.

## Lista de tarefas
{: #opsprocs-proactive-tasks}

Tabela 1. Tarefas proativas

| Título | Descrição |
|---|---|
| Saúde  |  Usando o vCenter, verifique o funcionamento de todos os hosts e objetos da VM. Percorra metodicamente clusters, hosts, armazenamentos de dados, VMs e redes em busca de Alarmes.  |
| Verificação de alarme e notificação | Há alarmes ativos no vCenter sobre os quais você não foi notificado? Por padrão, o vCenter possui um número de alarmes definidos quando é instalado. Esses alarmes podem alertá-lo sobre problemas, no entanto, por padrão, não tomam nenhuma ação diferente de um aviso ou alerta no vSphere Client. Eles podem ser configurados para uma notificação, como um e-mail. À medida que você verifica o funcionamento dos hosts e objetos da VM, revise quaisquer alarmes, decida se uma notificação é necessária e configure-a, conforme necessário. Só é necessário que você seja notificado sobre problemas mais importantes ou críticos. Considere se deseja ser notificado sobre esse problema às duas da manhã ou se ele pode esperar até o horário comercial normal e se está recebendo muitas notificações, o que pode ser lido por você como "ruído", pois é da natureza humana ignorar todos os alarmes.  |
| Verificação de capacidade/utilização de memória e CPU do cluster  |  Revise as métricas de capacidade/utilização para a CPU e a memória do cluster por meio do vCenter, navegando até cada cluster por vez e selecionando Monitorar, Desempenho. Revise os gráficos e estatísticas para garantir que seu cluster tenha recursos suficientes para atender à demanda. A demanda deve se basear na manutenção de capacidade suficiente para que as VMs sejam distribuídas quando necessário, de um host do vSphere ESXi para a falha e da inclusão das VMs de acordo com suas solicitações de serviço conhecidas.|
| Verificação de capacidade/utilização do armazenamento de dados  |  Revise as métricas de capacidade/utilização para os armazenamentos de dados usando o vCenter, navegando até cada armazenamento de dados por vez e selecionando Monitorar, Desempenho, Espaço. Revise os gráficos e estatísticas para garantir que seu armazenamento de dados tenha espaço suficiente para atender à demanda. A demanda deve se basear na manutenção de capacidade suficiente, de um host do vSphere ESXi para a falha (para um cluster vSAN) e da inclusão das VMs de acordo com suas solicitações de serviço conhecidas.|
| Verificação de desempenho do armazenamento de dados  |  Revise as métricas de desempenho para os armazenamentos de dados usando o vCenter, navegando até cada armazenamento de dados por vez e selecionando Monitorar, Desempenho, Desempenho, Em tempo real. Revise os gráficos e as estatísticas para garantir que a linha de base de desempenho do seu armazenamento de dados seja esperada e que quaisquer mudanças possam ser contabilizadas. Investigue quaisquer anormalidades. |
| Firmware do servidor bare metal | É uma melhor prática instalar as atualizações mais recentes de firmware para seus hosts de servidor bare metal. Verifique as atualizações de firmware nos hosts do servidor bare metal, navegando até a página de gerenciamento remoto em control.softlayer.com para cada host por vez e selecionando Recarregamento do sistema operacional. Na página exibida, revise a Versão Atual e a Versão de Atualização para a placa-mãe e os discos rígidos e veja se há atualizações disponíveis. Se houver, planeje a atualização do firmware em sua próxima janela de manutenção. Para obter mais informações, consulte [Perguntas frequentes: servidores bare metal](/docs/bare-metal?topic=bare-metal-bm-faq#what-if-my-bare-metal-server-has-out-of-date-firmware){:new_window}. |
| Correção do vSphere ESXi | Para obter informações sobre como verificar a disponibilidade de correções do vSphere ESXi, consulte [Criando linhas de base e conectando-as a objetos de inventário](/docs/services/vmwaresolutions?topic=vmware-solutions-vum-baselines#vum-baselines){:new_window}. |
| Atualizações de hardware da VM | Para obter informações sobre como verificar a disponibilidade de atualizações de hardware da VM, consulte [Criando linhas de base e conectando-as a objetos de inventário](/docs/services/vmwaresolutions?topic=vmware-solutions-vum-baselines#vum-baselines){:new_window}. |
| Atualizações do VM Tools | Para obter mais informações, veja [Criando linhas de base e conectando a objetos de inventário](/docs/services/vmwaresolutions?topic=vmware-solutions-vum-baselines#vum-baselines){:new_window}. |
| Correção do vSphere vSAN  | Para obter informações sobre como verificar a disponibilidade de correções do vSphere vSAN e o processo de correção, consulte [Atualizando clusters vSAN](/docs/services/vmwaresolutions?topic=vmware-solutions-vum-updating-vsan#vum-updating-vsan){:new_window}. |
| Correção do vCenter | Para obter mais informações sobre como verificar a disponibilidade de correções do VCSA e aplicar a atualização, consulte [Atualização do VCSA e vCenters vinculados por conexão única](/docs/services/vmwaresolutions?topic=vmware-solutions-vum-updating-vcsa#vum-updating-vcsa){:new_window}.  |
| Atualizando o NSX | Para obter mais informações sobre como verificar a disponibilidade de correções do NSX e aplicar os upgrades, consulte [Correção do NSX](/docs/services/vmwaresolutions?topic=vmware-solutions-vum-updating-nsx#vum-updating-nsx){:new_window}.  |
| Verifique VMs sem VM Tools  |  É uma boa prática instalar o VM Tools, pois ele permite uma maior interação com o sistema operacional, por exemplo, encerramento normal da VM. É possível usar o vCenter para verificar quais VMs não têm o VM Tools instalado, navegando até o cluster, selecionando Objetos relacionados, VMs e, em seguida, na tabela, ativando colunas para o VM Tools em execução e as versão do VM Tools. Revise a lista e instale o VM Tools, conforme apropriado. |
| VMs com capturas instantâneas | Para obter informações sobre as melhores práticas ao trabalhar com capturas instantâneas, consulte [Melhores práticas para usar capturas instantâneas no ambiente do vSphere (1025279)](https://kb.vmware.com/s/article/1025279){:new_window}. É importante identificar a existência de VMs com capturas instantâneas, uma vez que a utilização de uma única captura instantânea por mais de 72 horas cria um arquivo de captura instantânea que continua a crescer e pode fazer com que o local de armazenamento da captura instantânea fique sem espaço e impacte o desempenho do sistema. Para revisar VMs com capturas instantâneas, conecte-se ao vCenter usando o Web Client, selecione o vCenter Server e acesse a guia Objetos relacionados. Clique com o botão direito nos títulos da coluna e acesse Mostrar/Ocultar a lista de colunas. Na lista de colunas, escolha a opção Precisa de consolidação. Essa coluna mostra todas as VMs atualmente em execução em uma captura instantânea. |
| Correção do sistema operacional AD/DNS | O Microsoft Active Directory (AD)/Domain Name Server (DNS) é configurado automaticamente para fazer download apenas das atualizações. Para obter mais informações, consulte [Mais limitações e considerações](/docs/services/vmwaresolutions?topic=vmware-solutions-trbl_limitations#trbl_limitations){:new_window} para obter mais avisos de atualização. |
| Verificar a latência do armazenamento  |  Verifique a latência do armazenamento para entender quaisquer mudanças no acesso dos hosts do vSphere ESXi aos armazenamentos de dados. Uma latência muito alta faz com que os aplicativos hospedados nas VMs fiquem mais lentos. No vCenter, navegue até cada um dos armazenamentos de dados e, usando a guia Desempenho, revise a latência média de gravação por VM. |
| Revisar VMs com dispositivos virtuais | Os dispositivos virtuais, como CD ou unidades de disquete, criam uma sobrecarga, portanto, removem quaisquer dispositivos que não são necessários para uma VM. |
| Aviso de capacidade do vSAN | Quando qualquer dispositivo de capacidade em seu cluster atingir 80% de preenchimento, o vSAN rebalanceará automaticamente o cluster até que o espaço disponível em todos os dispositivos de capacidade esteja abaixo do limite. As operações a seguir podem fazer com que a capacidade do disco atinja 80% e inicie o rebalanceamento de cluster, causar falhas de hardware, colocar os hosts do vSAN no modo de manutenção com a opção Evacuar todos os dados ou colocar os hosts do vSAN no modo de manutenção com Garantir a acessibilidade de dados quando os objetos designados PFTT=0 residirem no host. Para fornecer espaço suficiente para a manutenção e a nova proteção e para minimizar os eventos de rebalanceamento automático no cluster vSAN, considere manter a capacidade de 30% disponível em todos os momentos. |
| Verificação de utilização do cluster | Usando o vCenter, revise cada cluster e identifique quais estão em 50% ou mais de utilização para CPU e RAM. 50% é escolhido como um nível de aviso para focar a atenção na possível expansão desse cluster com hosts adicionais ou na inclusão de novos clusters. A diferença entre 50% de utilização e um máximo de 80 a 90% é o seu espaço para VMs adicionais devido a solicitações de serviço. No limite de 50%, deve-se considerar as solicitações futuras e prever quando recursos adicionais precisarão ser incluídos. |
| Revisão de consolidação de cluster | Usando o vCenter, revise cada cluster e identifique quais estão com 30% ou menos de utilização para CPU e RAM. 30% é escolhido como um nível de aviso para focar a atenção em um possível dimensionamento adequado desse cluster, removendo hosts ou esse cluster e movendo VMs para outro cluster. |
| Dimensionar adequadamente VMs com dimensionamento excessivo | Use uma abordagem simples para dimensionar adequadamente VMs com dimensionamento excessivo. a. identifique, b. crie o perfil e ajuste e c. monitore as tendências de demanda. Usando o vCenter, identifique VMs grandes que têm o potencial para o dimensionamento adequado. Navegue até Monitorar, Desempenho e crie um perfil da demanda média de CPU e RAM da carga de trabalho ao longo do tempo e ajuste os recursos virtuais. Finalmente, continue a monitorar as cargas de trabalho para ver se o desempenho é aceitável. Idealmente, a memória consumida para a VM deve estar próxima da memória usada pelo S.O. guest, mais a sobrecarga para a execução da VM.|
| Dimensionar adequadamente VMs com dimensionamento insuficiente | Use uma abordagem simples para dimensionar adequadamente VMs com dimensionamento insuficiente. a. identifique, b. crie o perfil e ajuste e c. monitore as tendências de demanda. Identifique VMs pequenas que precisam ser dimensionadas adequadamente. Crie um perfil da demanda média de CPU e RAM da carga de trabalho ao longo do tempo e ajuste os recursos virtuais. Finalmente, continue a monitorar as cargas de trabalho para ver se o desempenho é aceitável. Idealmente, a memória consumida para a VM deve estar próxima da memória usada pelo S.O. guest, mais a sobrecarga para a execução da VM.|
| Verificar a compatibilidade do dispositivo de hardware da VM | Usando a compatibilidade de hardware do VMware no recurso de linha, verifique se esse sistema operacional suporta os recursos de hardware, a rede, os dispositivos de armazenamento de sua VMs, etc. Se não forem suportados, mude para um dispositivo suportado para melhorar a confiabilidade e o desempenho.  |

## Links relacionados
{: #opsprocs-proactive-links}

* [Gerenciamento de operações no {{site.data.keyword.cloud_notm}}](/docs/services/vmwaresolutions/services?topic=vmware-solutions-opsmgmt-intro)
